<!DOCTYPE html>
<html>
    <head>
        <title>Word Search RIA</title>

        <!--Linking stylesheets-->
        <link rel='stylesheet' type="text/css" href='Stylesheets/main_style.css'> 
        <link rel='stylesheet' type="text/css" href='Stylesheets/dan.css'> 
        <link rel='stylesheet' type="text/css" href='Stylesheets/glenn.css'> 
        <link rel='stylesheet' type="text/css" href='Stylesheets/paul.css'> 
        <link href="//code.jquery.com/ui/1.10.4/themes/smoothness/jquery-ui.css" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href ="Assets/bootstrap-master/dist/css/bootstrap-theme.min.css">
        
        <!--linking JQuery & ajax-->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.js"></script>
        <script src="https://ajax.aspnetcdn.com/ajax/jquery.validate/1.14.0/jquery.validate.min.js"></script>
        <script src="https://ajax.aspnetcdn.com/ajax/jquery.validate/1.14.0/additional-methods.min.js"></script>

        <!--Linking bootstrap-->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" integrity="sha512-dTfge/zgoMYpP7QbHy4gWMEGsbsdZeCXz7irItjcC3sPUFtf0kuFbDz/ixG7ArTxmDjLXDmezHubeNikyKGVyQ==" crossorigin="anonymous">
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js" integrity="sha512-K1qjQ+NcF2TYO/eI3M6v8EiNYZfA95pQumfvcVrTHtwQVDG+aHRqLi/ETn2uB+1JqwYqVG3LIvdm9lj6imS/pQ==" crossorigin="anonymous"></script>
        

        <!--Linking javascript-->
        <script type='text/javascript' src='Scripts/main.js'></script>
        <script type='text/javascript' src='Scripts/dan.js'></script>
        <script type='text/javascript' src='Scripts/paul.js'></script>
        <script type='text/javascript' src='Scripts/glenn.js'></script>
        
        <!--Linking Soundcloud widget API-->
        <script src="https://w.soundcloud.com/player/api.js" type="text/javascript"></script>
        
    </head>    
    <body class="bodyClass" onload="initPage()">
        
        <div class="container">
        
        <div class="row">
            
           <!-- <div class="col-md-2 test">
                
                <h2>RSS Feed?</h2>
                
                <h3>Global stats</h3>
                
                <p>E.g longest word found, total number of words found, most common word found, least common word found etc.</p>
                
                <br />
                
                <p>Show time until next grip update</p>
                
            
            </div>
                        -->
            
            <div class="col-md-2 test" id="findTheseWords">
                <h2 class="header">Find These Words</h2>
            </div>            
            
            <div class="col-md-6 gameArea test" id="horseBox">
                
                <button class='btn-success' id='newGameBtn'>New Game</button>
                <button class='btn-primary' id='createGameBtn'>Create Game</button>
                
                <h2 class="header">Word Search</h2>
                
                
                
                <h3 class="addWordForm inputFormHide">Enter the words you wish to play with!</h3><br>
                    <form action="/PeeHP/paul.php" method="post" name="form"  id="wordFormSubmit" class="inputFormHide addWordForm">
                        Word One: <input type="text" name="newWordOne" class="inputFormShow"><br>
                        Word Two: <input type="text" name="newWordTwo" class="inputFormShow"><br>
                        Word Three: <input type="text" name="newWordThree" class="inputFormShow"><br>
                        Word Four: <input type="text" name="newWordFour" class="inputFormShow"><br>
                        Word Five: <input type="text" name="newWordFive" class="inputFormShow"><br>
                        Word Six: <input type="text" name="newWordSix" class="inputFormShow"><br>
                        Word Seven: <input type="text" name="newWordSeven" class="inputFormShow"><br>
                        Word Eight: <input type="text" name="newWordEight" class="inputFormShow"><br>
                        Word Nine: <input type="text" name="newWordNine" class="inputFormShow"><br>
                        Word Ten: <input type="text" name="newWordTen" class="inputFormShow"><br>
                        <input type="submit" class="inputFormShow">
                    </form>
            </div>
            
           <div class="col-md-4 test">
                
                <div id="accordion">
                    
                    <!-- #### User Settings in the Accordion ### -->
                    <h3><img src="Assets/img/settings-icon.png" class="accordionImg"> User Settings</h3>
                    <div>
                    
                        <form id="settingsForm">
                            <input type="checkbox" id="nightCheck" name="nightMode" value="checkNightMode" class="text"> <span class="nightText">Night Mode</span> </input><br>
                            <input type="button" id ="applyButton" name="applyButton" value="Apply changes"/>
                        </form>
                        
                        <button onclick="getID">Get ID Button **TEST**</button>
                    
                    </div>
                    
                    <!-- #### RSS Feed in the Accordion ### -->
                    <h3><img src="Assets/img/rss.png" class="accordionImg"> RSS Feed</h3>
                    <div id="rssfeed">
                    </div>
                    
                    <!-- #### About Section in the Accordion ### -->
                    <h3><img src="Assets/img/about-icon.png" class="accordionImg"> About this game</h3>
                    <div>
                        <p>This is a simple wordsearch game.</p>
                        <p>To select a word, click the beginning and end letters.</p><br/>
                        <p>Developed by:</p>
                        <p>Paul Reid</p>
                        <p>Dan Downey</p>
                        <p>Glenn Cullen</p>
                    </div>
                </div>
                
             </div>
        
            </div>
        
                
                <div class="row">
                    <div class="col-md-2" id="musicControl">
                        <div class="row">
                            <div class="col-md-10">
                                <p id="autoPlay" class="btn btn-default musicButton">AutoPlay Enabled!</p>
                                <p id="volumeUp" class="btn btn-default musicButton">Volume Up</p>
                                <p id="volumeDown" class="btn btn-default musicButton">Volume Down</p>
                                <p id="skipSong" class="btn btn-default musicButton">Skip Song</p>
                            </div>
                            
                             <div class="col-md-2">
                                <div id="slider-vertical"></div>
                            </div>
                            
                        </div>
                    </div>
                            
                     
                    <div class="col-md-10">
                       
                                        <!-- Empty frame to hold the soundcloud player -->
                        <iframe id="myPlayer" width="100%" height="180" scrolling="no" frameborder="no" src=""></iframe> 
                        <audio id="songChangeAudio" autoplay="true" volume="0" src="" type="audio/mpeg"></audio>
                        <audio id="wordFoundAudio" autoplay="true" volume="0" src="" type="audio/mpeg"></audio>
                        <audio id="gameFinishedAudio" autoplay="true" volume="0" src="" type="audio/mpeg"></audio>
                            

                    </div>
                </div>
                
                </div> <!--End of the Contianer-->

        
        
        <script>
        
        function letterCheck(inputtxt){   
                
                var letters = /^[a-zA-Z]+$/;  
                
                if(inputtxt.value.match(letters)){
                    
                    if(inputtxt.value.length < 3 || inputtxt.value.length > 8){
                        alert("Please make sure your words are longer 3 letters or more and no more than 8");
                        return false;
                    
                            
                        
                    }else{
                        
                        if(inputtxt.value == "" || inputtxt.value == null || inputtxt.value.match(" ")){
                        
                            alert("A word must not be blank or have a space");
                            
                        }else{
                            
                            alert('Perfect');  
                            document.form.newWordOne.focus();  
                            return true;  
                            
                            
                        }
                        
                        
                    }
                        
                    
                }else{
                    
                    alert('Please input letters only - No numbers or synbols!!');  
                    return false;  
            }  
        }  
                    
                    
                    
                    
        
        /*global startUniqueGame*/
        
    
            
            
        
        
            // $("#wordFormSubmit").on("submit", function(e){
            //         alert("working");
            //         e.preventDefault();
                    
                    
                    
            //         if(letterCheck(document.form.newWordOne) && letterCheck(document.form.newWordTwo) && letterCheck(document.form.newWordThree) && 
            //         letterCheck(document.form.newWordFour) && letterCheck(document.form.newWordFive) && letterCheck(document.form.newWordSix) && 
            //         letterCheck(document.form.newWordSeven) && letterCheck(document.form.newWordEight) && letterCheck(document.form.newWordNine) && 
            //         letterCheck(document.form.newWordTen) && ){
                        
                    
                        
                    
                    
                //     $this = $(this);
                //     $.ajax({
                //       type: "POST",
                //       url: $this.attr('action'),
                //       data: $this.serialize(),
                //       success : function(){
                //             //What happens when it validates successfully
                //             //Basically push word array and its all g
                    
                    
                //           }
                           
                           
                //           alert('Done');
                //           startUniqueGame(words);
                //           document.getElementById("wordFormSubmit").reset();
                //       }
                       
                //     }else{
                //         return false;
                //     }
                    
                //     });
                // });
                
                
                
                
        
            // $(document).ready(function(){
                
            //     $('#wordFormSubmit').validate({ // initialize the plugin
            //         rules: {
            //             newWordOne: {
            //                 required: true,
            //                 minlength:3,
            //                 nowhitespace:true,
            //                 lettersonly:true
            //             },
            //             newWordTwo: {
            //                 required: true,
            //                 minlength: 3,
            //                 maxLength: 8
            //             },
            //             newWordThree: {
            //                 required: true,
            //                 minlength: 3,
            //                 maxLength: 8
            //             },
            //             newWordFour: {
            //                 required: true,
            //                 minlength: 3,
            //                 maxLength: 8
            //             },
            //             newWordFive: {
            //                 required: true,
            //                 minlength: 3,
            //                 maxLength: 8
            //             },
            //             newWordSix: {
            //                 required: true,
            //                 minlength: 3,
            //                 maxLength: 8
            //             },
            //             newWordSeven: {
            //                 required: true,
            //                 minlength: 3,
            //                 maxLength: 8
            //             },
            //             newWordEight: {
            //                 required: true,
            //                 minlength: 3,
            //                 maxLength: 8
            //             },
            //             newWordNine: {
            //                 required: true,
            //                 minlength: 3,
            //                 maxLength: 8
            //             },
            //             newWordTen: {
            //                 required: true,
            //                 minlength: 3,
            //                 maxLength: 8
            //             },
            //             submitHandler: function(form){
                           
            //                 form.preventDefault();
            //                 $this = $(this);
            //                 $.ajax({
                             
            //                   type: "POST",
            //                   url: $this.attr('action'),
            //                   data: $this.serialize(),
            //                   success : function(){
                            
            //                         alert("success");
            //                         //What happens when it validates successfully
            //                         //Basically push word array and its all g
                                    
            //                         alert('Done');
            //                         startUniqueGame(words);
            //                         document.getElementById("wordFormSubmit").reset();
            //                         form.preventDefault();
            //                          form.submit();

            //                   }
                                
                                  
            //                   });
                       
            //             }
            //         }
            //     });

                
            // });
                
                
            //     $(document).ready(function(){
                     
                     
                     
                     
            //     $("#wordFormSubmit").on("submit", function(e){
            //                 alert("working");
            //                 e.preventDefault();
            //                 console.log("Default Prevented");
            //     }).validate({
            //         onsubmit: false,
            //         rules: {
            //             newWordOne: {
            //                 required: true,
            //                 minlength:3
            //             },
            //             newWordTwo: {
            //                 required: true,
            //                 minlength: 3
            //             },
            //             newWordThree: {
            //                 required: true,
            //                 minlength: 3
            //             },
            //             newWordFour: {
            //                 required: true,
            //                 minlength: 3
            //             },
            //             newWordFive: {
            //                 required: true,
            //                 minlength: 3
            //             },
            //             newWordSix: {
            //                 required: true,
            //                 minlength: 3
            //             },
            //             newWordSeven: {
            //                 required: true,
            //                 minlength: 3
            //             },
            //             newWordEight: {
            //                 required: true,
            //                 minlength: 3
            //             },
            //             newWordNine: {
            //                 required: true,
            //                 minlength: 3
            //             },
            //             newWordTen: {
            //                 required: true,
            //                 minlength: 3
            //             },
            //             submitHandler: function(form){
                           
            //               alert("submitHandler");
            //                 form.preventDefault();
            //                 var $this = $(this);
            //                 $.ajax({
                                     
            //                       type: "POST",
            //                       url: $this.attr('action'),
            //                       data: $this.serialize(),
            //                       success : function(){
                                    
            //                             alert("success");
            //                             //What happens when it validates successfully
            //                             //Basically push word array and its all g
                                        
            //                             alert('Done');
            //                             startUniqueGame(words);
            //                             document.getElementById("wordFormSubmit").reset();
            //                             form.preventDefault();
            //                             form.submit();
                                        
            //                       }
                                        
                                          
            //                 });
                               
            //             }
                        
            //     }
                    
                    
                    
            //     });
            // });        
                
                
               $(document).ready(function(){
        
                $("#wordFormSubmit").on("submit", function(e){
                    e.preventDefault();
                    $this = $(this);
                    
                    
                    $.ajax({
                       type: "POST",
                       url: $this.attr('action'),
                       data: $this.serialize(),
                       
                       beforeSend: function(valid){
                           
                           //The validation is done in here
                            if(letterCheck(document.form.newWordOne) && letterCheck(document.form.newWordTwo) && letterCheck(document.form.newWordThree) && 
                            letterCheck(document.form.newWordFour) && letterCheck(document.form.newWordFive) && letterCheck(document.form.newWordSix) && 
                            letterCheck(document.form.newWordSeven) && letterCheck(document.form.newWordEight) && letterCheck(document.form.newWordNine) && 
                            letterCheck(document.form.newWordTen)){
                                
                                
                           
                           alert("Successfully validated");
                             
                            }else{
                               
                                valid.abort();
                                
                            }
                                                           
                          
                           
                           
                       },
                       
                       success : function(){
                           
                           
                            var words = [];
                            
                            words.push(form.newWordOne.value.toLowerCase());
                            words.push(form.newWordTwo.value.toLowerCase());
                            words.push(form.newWordThree.value.toLowerCase());
                            words.push(form.newWordFour.value.toLowerCase());
                            words.push(form.newWordFive.value.toLowerCase());
                            words.push(form.newWordSix.value.toLowerCase());
                            words.push(form.newWordSeven.value.toLowerCase());
                            words.push(form.newWordEight.value.toLowerCase());
                            words.push(form.newWordNine.value.toLowerCase());
                            words.push(form.newWordTen.value.toLowerCase());
                            
                            console.log(words);
                            
                            if($('.addWordForm').hasClass('inputFormShow')){
                                
                                $('.addWordForm').toggleClass("inputFormShow inputFormHide");
                                
                            }
        
                            startUniqueGame(words);
                           
                           
                          alert('Done');
                          document.getElementById("wordFormSubmit").reset();
                          
                       },
                       
                       error: function(){
                           alert("Error");
                       }
                       
                       
                    });
                
                });
                        
            });
                
            
                
                
                
                
                
                
                
                

        
            //Runs any initialisation functions on current page and external scripts
            function initPage(){
                getRSS();   //Pulls the rss feed in from the rss.xml
                initDanJS(  document.getElementById('songChangeAudio'),
                            document.getElementById('wordFoundAudio'),
                            document.getElementById('gameFinishedAudio')
                            );    //Runs script init for dan.js
                            
                document.getElementById('songChangeAudio').volume=0.2;  //Lowers the volume fo the vinyl scratch in the background
                document.getElementById('wordFoundAudio').volume=0.4;  //Lowers the volume fo the vinyl scratch in the background
                document.getElementById('gameFinishedAudio').volume=0.8;  //Lowers the volume fo the vinyl scratch in the background
            }
            
            
            function getRSS(){
                document.getElementById('rssfeed').innerHTML = "";
                $.get('rss.xml', function (data) {
                    $(data).find("item").each(function () { //Searches through the rss.xml for any "item" tag
                        var x = $(this);    //Stores the tag's contents in the variable x
                        var myRSS = "<p>"+x.find("title").text()+" = "+x.find("content").text()+"<p>";  //Pulls out the needed information from the stored tag
                        document.getElementById('rssfeed').innerHTML += myRSS;
                    });
                });
            }

       </script>
    </body>
</html>